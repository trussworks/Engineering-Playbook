"use strict";(self.webpackChunkengineering_playbook=self.webpackChunkengineering_playbook||[]).push([[2810],{3905:(e,t,o)=>{o.d(t,{Zo:()=>d,kt:()=>p});var r=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,r,a=function(e,t){if(null==e)return{};var o,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var c=r.createContext({}),l=function(e){var t=r.useContext(c),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},d=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var o=e.components,a=e.mdxType,n=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=l(o),p=a,m=u["".concat(c,".").concat(p)]||u[p]||h[p]||n;return o?r.createElement(m,i(i({ref:t},d),{},{components:o})):r.createElement(m,i({ref:t},d))}));function p(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=o.length,i=new Array(n);i[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var l=2;l<n;l++)i[l]=o[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,o)}u.displayName="MDXCreateElement"},6644:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>n,metadata:()=>s,toc:()=>l});var r=o(7462),a=(o(7294),o(3905));o(8209);const n={},i="Great Code Reviews Bring Happiness to my Heart",s={unversionedId:"developing/code-reviews/great-code-reviews",id:"developing/code-reviews/great-code-reviews",title:"Great Code Reviews Bring Happiness to my Heart",description:"So you've put together the perfect changeset. You use your favorite tool to share your changes and ask politely for a code review.",source:"@site/docs/developing/code-reviews/great-code-reviews.md",sourceDirName:"developing/code-reviews",slug:"/developing/code-reviews/great-code-reviews",permalink:"/docs/developing/code-reviews/great-code-reviews",draft:!1,editUrl:"https://github.com/trussworks/Engineering-Playbook/edit/main/docs/developing/code-reviews/great-code-reviews.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Code Reviews",permalink:"/docs/developing/code-reviews/"},next:{title:"Best Practices for Submitting a Pull Request",permalink:"/docs/developing/code-reviews/pull-request-best-practices"}},c={},l=[{value:"Making code review process work for your team",id:"making-code-review-process-work-for-your-team",level:2},{value:"Performing the review",id:"performing-the-review",level:2}],d={toc:l};function h(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,r.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"great-code-reviews-bring-happiness-to-my-heart"},"Great Code Reviews Bring Happiness to my Heart"),(0,a.kt)("p",null,"So you've put together the perfect changeset. You use your favorite tool to share your changes and ask politely for a code review."),(0,a.kt)("p",null,"How do you make that code review great?"),(0,a.kt)("h2",{id:"making-code-review-process-work-for-your-team"},"Making code review process work for your team"),(0,a.kt)("p",null,"We've all been on teams large and small that have tried to integrate code review into their process. Some of those teams succeeded, and others failed. There were several themes that arose that were indicators for success or failure. Here are the practices we've found that tend to make code reviews a success."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Do it asynchronously.")," If you or the reviewer are at all busy, and you probably are, do it asynchronously. Let the reviewer know there\u2019s an item awaiting their attention, then give them a day to get to it. If they don\u2019t get to it in a day, bug them again.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Use a visual code review management tool.")," Use a code review tool which keeps track of comments on changes, and allows in-line discussion. In addition to GitHub\u2019s code review tool there is Google's ",(0,a.kt)("a",{parentName:"p",href:"https://www.gerritcodereview.com/"},"Gerrit"),", ",(0,a.kt)("a",{parentName:"p",href:"https://phacility.com/phabricator/"},"Phabricator")," that started as a Facebook project, or ",(0,a.kt)("a",{parentName:"p",href:"https://www.jetbrains.com/upsource"},"JetBrains Upsource")," as a paid option.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Make code review a gatekeeper step in your source management process.")," If it\u2019s something that must pass before code can be merged, then it will happen. GitHub\u2019s pull request feature does a great job of supporting an integrated code review step. A dashboard shows what pull requests are outstanding, and a merge button minimizes friction once the changes have passed review. If you try to add code review as an adjunct step to an existing process - e.g. sending an email asking for a code review, with no central dashboard where outstanding review requests can be seen - it can be very difficult to consistently employ code review, since its existence will be somewhat invisible. YMMV.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Integrate your tool into a team communication medium.")," Have the code review tool notify you when relevant changes have been made or commented upon. Email, chat, carrier pigeon, or tweet - whatever medium will catch your attention in a timely manner, and not break your flow."))),(0,a.kt)("h2",{id:"performing-the-review"},"Performing the review"),(0,a.kt)("p",null,"Once you\u2019ve done the above, there are several additional things each person can do to make code reviews more effective on an individual basis."),(0,a.kt)("p",null,"When asking for a code review, try to find a trusted critic. The code review step in a revision control workflow process is like this magical land where you can go with code and make it pretty before the ball, so that when it walks through that door it will shine like Cinderella on her big night out. You want the code reviewer to give you everything they\u2019ve got. You may decide that some suggested changes are not actually necessary. However on the first code review pass, you want all the criticisms you can get. The more detailed the better, within limits."),(0,a.kt)("p",null,"The code reviewer should be looking at many aspects of the code at once. The overall structure, the structure of individual methods or classes, the syntax, the nomenclature, the comments, the documentation, the testability, and the adherence to style guides used for your project. (If you don\u2019t have a style guide, the existing style is your guide. If there isn\u2019t an existing style, you should scrap what you\u2019ve got and start over. ...just kidding. In this last case, you should probably pick the style you think is best, and adhere to that.) Checklists can help to make sure you don\u2019t miss anything here."),(0,a.kt)("p",null,"The commenters in a code review should start by trying to understand the motivation of the person writing the code. If that is not clear to you, then a good comment might be one inquiring as to the purpose of the code. Once you understand the coder\u2019s motivation, use this perspective as a jumping off point to provide observations and suggestions that might make the code better. When critiquing someone else, starting from a perspective of understanding will help you to make a more informative and effective critique."),(0,a.kt)("p",null,"Be clear, succinct, and courteous. This is the best way to make sure your critiques/comments are heard and understood. Give reasons to back up your suggestions. Cite style guides where they exist. Leave room for the other person to explain where you might be missing something."),(0,a.kt)("p",null,"After the first round of comments, the person who requested the code review should review the comments and make changes or give feedback. Where in doubt, defer to the opinion of the reviewer. You can always change it later!"),(0,a.kt)("p",null,"Complete the code review soon after it was requested. Under 15 minutes is fantastic, under a day is great. Under a week can be fine depending on how the changes affect the project. Any longer than a week, and the changes begin to get stale. Not just in the codebase, but also in your head. The fresher you can be when reviewing the changes, the faster all the steps of the code review process will be. If the code begins to get old and stale, escalate the review of those changes in priority, or question whether they are important enough to matter in the first place."),(0,a.kt)("p",null,"As a general comment on style, everything goes faster if pull requests are of a reasonable size. If the reviewer can grok your changes in under 5 minutes, you're golden. Sometimes a larger commit is necessary, and that's fine."),(0,a.kt)("p",null,"However commits that take longer than 10-15 minutes to review should be questioned, or framed in a way that helps the reviewer understand why the commit must be so large. Larger commits slow project velocity due to this code review friction, and are to be avoided if possible."),(0,a.kt)("p",null,"IBM did some nifty research in this area to ",(0,a.kt)("a",{parentName:"p",href:"http://www.ibm.com/developerworks/rational/library/11-proven-practices-for-peer-review/"},"see how code review size affects code quality"),". Notably, review of one\u2019s own code prior to submission was shown to positively affect code quality as well."),(0,a.kt)("p",null,"Where there are conflicts, bring in more reviewers and resolve outstanding questions. Don\u2019t become attached to your code. Defer to the majority. And remember it can always change again later. ;)"),(0,a.kt)("p",null,"And enjoy! Code review is one of the best opportunities to learn that you have on a daily basis. Take what you learn in code reviews and use that to improve your coding habits daily."),(0,a.kt)("p",null,"Happy coding!"))}h.isMDXComponent=!0},8209:(e,t,o)=>{o(7294)}}]);