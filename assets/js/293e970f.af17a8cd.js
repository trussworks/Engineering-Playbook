"use strict";(globalThis.webpackChunkengineering_playbook=globalThis.webpackChunkengineering_playbook||[]).push([[2538],{511:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"infrasec/ansible/ansible-primer","title":"Ansible Primer","description":"Ansible is a Python-based configuration management tool owned and supported by Red Hat; while it is essentially a","source":"@site/docs/infrasec/ansible/ansible-primer.md","sourceDirName":"infrasec/ansible","slug":"/infrasec/ansible/ansible-primer","permalink":"/docs/infrasec/ansible/ansible-primer","draft":false,"unlisted":false,"editUrl":"https://github.com/trussworks/Engineering-Playbook/edit/main/docs/infrasec/ansible/ansible-primer.md","tags":[],"version":"current","frontMatter":{},"sidebar":"practices","previous":{"title":"Ansible","permalink":"/docs/infrasec/ansible/"},"next":{"title":"Molecule Primer","permalink":"/docs/infrasec/ansible/molecule-primer"}}');var s=i(4848),o=i(8453);const a={},r="Ansible Primer",l={},c=[{value:"Setting up your environment",id:"setting-up-your-environment",level:2},{value:"Overview",id:"overview",level:2},{value:"Ansible repos",id:"ansible-repos",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"ansible-primer",children:"Ansible Primer"})}),"\n",(0,s.jsx)(n.p,{children:"Ansible is a Python-based configuration management tool owned and supported by Red Hat; while it is essentially a\nremote-execution tool originally designed to orchestrate a wider environment, it can also be used as a provisioning tool\nwith things like Packer, which is where you are most likely to see it in a Truss environment."}),"\n",(0,s.jsxs)(n.p,{children:["This primer is not intended to replace the official documentation for Ansible, which can be found at\n",(0,s.jsx)(n.a,{href:"https://docs.ansible.com/ansible/latest/index.html",children:"https://docs.ansible.com/ansible/latest/index.html"}),". It is only intended to provide a high-level overview and give you\nan idea where to find more detailed resources."]}),"\n",(0,s.jsx)(n.h2,{id:"setting-up-your-environment",children:"Setting up your environment"}),"\n",(0,s.jsxs)(n.p,{children:["When working with Ansible, you\u2019ll probably want to set up a virtual environment so that you can install ansible and any\nother Python modules necessary without contaminating your system Python installation. If you\u2019ve never done this before,\nthis tutorial should help: ",(0,s.jsx)(n.a,{href:"https://www.pythonforbeginners.com/basics/how-to-use-python-virtualenv/",children:"https://www.pythonforbeginners.com/basics/how-to-use-python-virtualenv/"}),". If you're an\nexperienced Python programmer and want to use ",(0,s.jsx)(n.code,{children:"pipenv"})," or another alternative, that's perfectly fine too. It is\nrecommended that you use Python 3 as your Python binary."]}),"\n",(0,s.jsxs)(n.p,{children:["Activate your virtualenv and run: ",(0,s.jsx)(n.code,{children:"pip install ansible"})]}),"\n",(0,s.jsx)(n.p,{children:"This should install the ansible modules you\u2019ll need and any prerequisites into your virtualenv."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["Ansible is an agentless configuration management tool; it does not require any additional software to be installed on the\ntarget hosts, unlike say Puppet. Individual components of a system\u2019s configuration are grouped into ",(0,s.jsx)(n.em,{children:"roles"}),"; for\ninstance, installing and configuring Apache might be contained within an \u201capache\u201d role. Many of these are available in\nAnsible Galaxy, a library of open-sourced roles that can be downloaded and used, similar to the Puppet Forge or Chef\nSupermarket."]}),"\n",(0,s.jsxs)(n.p,{children:["Each role contains ",(0,s.jsx)(n.em,{children:"tasks"}),"; these tasks could be installing a package, writing out a configuration file from a template,\nrestarting a service, or even running an arbitrary shell script. These are defined via YAML configurations. A role may\nalso contain other components, such as variables or handlers."]}),"\n",(0,s.jsxs)(n.p,{children:["Ansible modules can be tested with ",(0,s.jsx)(n.a,{href:"/docs/infrasec/ansible/molecule-primer",children:"Molecule"}),", which is the Red Hat-supported automated testing\nmethod. Molecule can be configured to spin up a docker container or EC2 instance, among other providers, and run your\nrole in isolation to make sure it works as intended. Molecule will also use\n",(0,s.jsx)(n.a,{href:"https://github.com/ansible/ansible-lint",children:"ansible-lint"})," to lint your modules, which we recommend you install as a\nprecommit hook in any Ansible repositories you\u2019re working in. You can do that by adding the following to\n",(0,s.jsx)(n.code,{children:".pre-commit-config.yaml"})," in the repository root, assuming you've installed precommit:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:"repos:\n  - repo: https://github.com/ansible/ansible-lint.git\n    rev: v4.1.0\n    hooks:\n      - id: ansible-lint\n        types: [yaml]\n"})}),"\n",(0,s.jsx)(n.h2,{id:"ansible-repos",children:"Ansible repos"}),"\n",(0,s.jsx)(n.p,{children:"In general, if at all possible, each Ansible role you write should use a separate repo, so that it can be used\nelsewhere. This means it should be written for the general case as much as possible; environment-specific variables\nshould have sane defaults and then get overridden if necessary in the playbook that calls them. It also means you should\nhave some minimum level of documentation so that people can see how your role is meant to be used in the wild."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>r});var t=i(6540);const s={},o=t.createContext(s);function a(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);