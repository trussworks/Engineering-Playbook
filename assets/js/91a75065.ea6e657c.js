"use strict";(self.webpackChunkengineering_playbook=self.webpackChunkengineering_playbook||[]).push([[1032],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),p=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(a),m=n,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return a?r.createElement(h,i(i({ref:t},c),{},{components:a})):r.createElement(h,i({ref:t},c))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},6277:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=a(7462),n=(a(7294),a(3905));const o={},i="0004 - Use PostgreSQL as a relational store",l={unversionedId:"practices/appeng/adrs/postgresql-as-relational-store",id:"practices/appeng/adrs/postgresql-as-relational-store",title:"0004 - Use PostgreSQL as a relational store",description:"Status: Accepted",source:"@site/docs/practices/appeng/adrs/0004-postgresql-as-relational-store.md",sourceDirName:"practices/appeng/adrs",slug:"/practices/appeng/adrs/postgresql-as-relational-store",permalink:"/docs/practices/appeng/adrs/postgresql-as-relational-store",draft:!1,editUrl:"https://github.com/trussworks/Engineering-Playbook/edit/main/docs/practices/appeng/adrs/0004-postgresql-as-relational-store.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"0003 Open Source Application Code",permalink:"/docs/practices/appeng/adrs/open-source-application-code"},next:{title:"0005 - JavaScript dependency management",permalink:"/docs/practices/appeng/adrs/javascript-dependency-management"}},s={},p=[{value:"Context",id:"context",level:2},{value:"Decision",id:"decision",level:2},{value:"Why is this Applicable to the Practice as a Whole",id:"why-is-this-applicable-to-the-practice-as-a-whole",level:2},{value:"When to Not Implement This Decision",id:"when-to-not-implement-this-decision",level:2},{value:"Alternatives Considered",id:"alternatives-considered",level:2},{value:"PostgreSQL",id:"postgresql",level:3},{value:"Pros",id:"pros",level:4},{value:"Cons",id:"cons",level:4},{value:"MySQL",id:"mysql",level:3},{value:"Pros",id:"pros-1",level:4},{value:"Cons",id:"cons-1",level:4},{value:"Commercial Databases (Oracle, SQL Server, DB2, etc.)",id:"commercial-databases-oracle-sql-server-db2-etc",level:3},{value:"Pros",id:"pros-2",level:4},{value:"Cons",id:"cons-2",level:4}],c={toc:p};function d(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"0004---use-postgresql-as-a-relational-store"},"0004 - Use PostgreSQL as a relational store"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Status:")," Accepted"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Date Accepted:")," 5/5/2022"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Reviewers:")," @felipe-lee @ferlatte @JasonLin0991 @macrael @mikena-truss @reggieriser @sandy-wright @suzubara"),(0,n.kt)("h2",{id:"context"},"Context"),(0,n.kt)("p",null,"It is typical for our projects to require the persistent storage of data. A relational database is\noften a good choice for this as it allows us to predefine a schema for and relationships\nbetween data. A database management system (DBMS) can interpret and enforce these rules\nwhile providing a means to efficiently and safely interact with the data. This ADR documents the\nreasoning behind our recommendation of a preferred DBMS."),(0,n.kt)("h2",{id:"decision"},"Decision"),(0,n.kt)("p",null,"Use ",(0,n.kt)("a",{parentName:"p",href:"https://www.postgresql.org"},"PostgreSQL")," when you need a relational store."),(0,n.kt)("h2",{id:"why-is-this-applicable-to-the-practice-as-a-whole"},"Why is this Applicable to the Practice as a Whole"),(0,n.kt)("p",null,"Since the requirement for a relational data store is common, there are advantages of us standardizing\non one DBMS across the practice. Benefits include:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"ability to transfer knowledge across projects"),(0,n.kt)("li",{parentName:"ul"},"reduced ramp-up time when switching projects"),(0,n.kt)("li",{parentName:"ul"},"support by cloud providers, allowing reuse of infrasec practices"),(0,n.kt)("li",{parentName:"ul"},"norming on a common SQL/DDL dialect")),(0,n.kt)("p",null,"Historically, most Truss projects deploy a database on AWS. Note that AWS provides two PostgreSQL options:\nRDS PostgreSQL and Aurora PostgreSQL. The typical Truss project will likely use RDS PostgreSQL since Aurora targets\nvery large or high-availability sites. That said, evaluate the features and pricing for each against your project's\nneeds."),(0,n.kt)("h2",{id:"when-to-not-implement-this-decision"},"When to Not Implement This Decision"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"If the project's client/sponsor has an established and/or inflexible existing DBMS requirement"),(0,n.kt)("li",{parentName:"ul"},"If the nature of the data lends itself to a different type of data store (NoSQL database, graph database, etc.)"),(0,n.kt)("li",{parentName:"ul"},"The project is so small, self-contained, or temporary that a lightweight solution like SQLite is more appropriate")),(0,n.kt)("h2",{id:"alternatives-considered"},"Alternatives Considered"),(0,n.kt)("h3",{id:"postgresql"},"PostgreSQL"),(0,n.kt)("h4",{id:"pros"},"Pros"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"+")," Mature and full-featured DBMS with a 25-year history"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"+")," Free and open-source"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"+")," Good documentation and user community"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"+")," Advanced JSON support, so flexible enough for some unstructured data"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"+")," Supported by most database tools and ORMs"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"+")," Most Truss projects have used PostgreSQL for a relational store, so we already have experience we can build upon")),(0,n.kt)("h4",{id:"cons"},"Cons"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"-")," No guaranteed support (unless you pay for third-party support)"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"-")," Some clients may not be comfortable with an open-source DBMS")),(0,n.kt)("h3",{id:"mysql"},"MySQL"),(0,n.kt)("h4",{id:"pros-1"},"Pros"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"+")," Mature DBMS with a 25-year history"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"+")," Community edition is free and open-source"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"+")," Good documentation and user community"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"+")," Supported by most database tools and ORMs")),(0,n.kt)("h4",{id:"cons-1"},"Cons"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"-")," No guaranteed support (unless you pay for third-party support)"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"-")," Some clients may not be comfortable with an open-source DBMS"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"-")," Given that MySQL is owned by Oracle, some worry that it may be harder to contribute to or not always be free"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"-")," More advanced features are found in the paid Enterprise Edition"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"-")," ACID support is not as mature")),(0,n.kt)("h3",{id:"commercial-databases-oracle-sql-server-db2-etc"},"Commercial Databases (Oracle, SQL Server, DB2, etc.)"),(0,n.kt)("h4",{id:"pros-2"},"Pros"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"+")," Mature DBMS with long history"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"+")," Traditional paid software backed by a company and a support team"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"+")," Supported by most database tools and ORMs")),(0,n.kt)("h4",{id:"cons-2"},"Cons"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"-")," Licensing fees and support can be very expensive"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"-")," Not open source so you are reliant on company for fixes"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"-")," Support by ORMs can be spotty"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"-")," Differences in SQL syntax and error codes can make it difficult to get help compared to more popular\nopen-source options")))}d.isMDXComponent=!0}}]);