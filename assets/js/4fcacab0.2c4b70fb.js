"use strict";(self.webpackChunkengineering_playbook=self.webpackChunkengineering_playbook||[]).push([[1868],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),l=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=l(e.components);return n.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=l(a),m=r,c=h["".concat(p,".").concat(m)]||h[m]||u[m]||o;return a?n.createElement(c,i(i({ref:t},d),{},{components:a})):n.createElement(c,i({ref:t},d))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=h;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=a[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},52:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var n=a(7462),r=(a(7294),a(3905));a(8209);const o={},i="Data-Design",s={unversionedId:"web/api/rest-api-design/Data-Design",id:"web/api/rest-api-design/Data-Design",title:"Data-Design",description:"Passing Parameters",source:"@site/docs/web/api/rest-api-design/Data-Design.md",sourceDirName:"web/api/rest-api-design",slug:"/web/api/rest-api-design/Data-Design",permalink:"/docs/web/api/rest-api-design/Data-Design",draft:!1,editUrl:"https://github.com/trussworks/Engineering-Playbook/edit/main/docs/web/api/rest-api-design/Data-Design.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Concurrency Control",permalink:"/docs/web/api/rest-api-design/Concurrency-Control"},next:{title:"Error Response Strategy",permalink:"/docs/web/api/rest-api-design/Error-Response-Strategy"}},p={},l=[{value:"Passing Parameters",id:"passing-parameters",level:2},{value:"Types of  Parameters",id:"types-of--parameters",level:2},{value:"Path Parameter",id:"path-parameter",level:3},{value:"Query Parameter",id:"query-parameter",level:3},{value:"Body Parameter",id:"body-parameter",level:3},{value:"Header Parameter",id:"header-parameter",level:3},{value:"Conclusion",id:"conclusion",level:2}],d={toc:l};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"data-design"},"Data-Design"),(0,r.kt)("h2",{id:"passing-parameters"},"Passing Parameters"),(0,r.kt)("p",null,"One of the first things you'll need to figure out, after you've decided on the ",(0,r.kt)("a",{parentName:"p",href:"/docs/web/api/rest-api-design/HTTP-Methods"},"HTTP Method")," to use, is how to supply data to the endpoint."),(0,r.kt)("p",null,"There are four different ways to do so, which can be confusing. They are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Path"),(0,r.kt)("li",{parentName:"ul"},"Query"),(0,r.kt)("li",{parentName:"ul"},"Body"),(0,r.kt)("li",{parentName:"ul"},"Headers")),(0,r.kt)("p",null,"Let's dive into each of these and understand what they are. We'll look at the following example request to update a shipment."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'PATCH /v1/shipments/01b9671e-b268?expand=services HTTP/1.1\nHost: api.move.mil\nContent-Type: application/json\nIf-Match: MjAyMC0xMi0wMVQxODo1NjoxMy4zNjkxNzRa\nBody:\n{\n    "shipmentType": "UPS",\n    "deliveryDate": "2020-06-08"\n}\n')),(0,r.kt)("h2",{id:"types-of--parameters"},"Types of  Parameters"),(0,r.kt)("h3",{id:"path-parameter"},"Path Parameter"),(0,r.kt)("p",null,"This parameter is in the URI of the path, the web address so to speak."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Typically, path parameters are used to pass in a resource identifier"),". This is handy as it means you don't have to send a body for a simple GET request."),(0,r.kt)("p",null,"In our example request, which is a PATCH request, the path is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"api.move.mil/v1/shipments/01b9671e-b268\n")),(0,r.kt)("p",null,"The code at the end ",(0,r.kt)("inlineCode",{parentName:"p"},"01b9671e-b268")," identifies the shipment we are trying to update. You may have more than one ID in the path but it's recommended to keep the ",(0,r.kt)("a",{parentName:"p",href:"/docs/web/api/rest-api-design/URL-Design#url-depth"},"URL length and depth constrained"),"."),(0,r.kt)("h3",{id:"query-parameter"},"Query Parameter"),(0,r.kt)("p",null,"The next type of parameter is also tacked on to the address, but is passed in after the main URL."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Queries are usually used for pagination, filtering and expansion of nested objects.")),(0,r.kt)("p",null,"In our example request, the query parameter is ",(0,r.kt)("inlineCode",{parentName:"p"},"expand")," and the value is ",(0,r.kt)("inlineCode",{parentName:"p"},"services"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"?expand=services\n")),(0,r.kt)("p",null,"This could be used to request the server to expand a nested object called services. You can send more than one query parameter, but must follow the ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Query_string"},"rules for query string formatting"),"."),(0,r.kt)("p",null,"One important thing to keep in mind is that since the query is in the path, it will be exposed in some situations and therefore is ",(0,r.kt)("strong",{parentName:"p"},"not the right place for sensitive data"),"."),(0,r.kt)("p",null,"No matter whether you are using https/TLS, the user may inadvertently share the path and expose a session token or other vital data."),(0,r.kt)("p",null,"Read here for more details on ",(0,r.kt)("a",{parentName:"p",href:"https://owasp.org/www-community/vulnerabilities/Information_exposure_through_query_strings_in_url"},"Information exposure through URL query strings"),"."),(0,r.kt)("h3",{id:"body-parameter"},"Body Parameter"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"The body of the post is where the bulk of the parameters are passed in.")),(0,r.kt)("p",null,"Usually we use a JSON representation to provide structure to the body. JSON is very flexible and a well-understood standard, which makes it perfect for this use. We also return data back to the caller in this format."),(0,r.kt)("p",null,"In the example, the body that we send is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n    "shipmentType": "UPS",\n    "deliveryDate": "2020-06-08"\n}\n')),(0,r.kt)("p",null,"This is requesting a change to two fields, named ",(0,r.kt)("inlineCode",{parentName:"p"},"shipmentType")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"deliveryDate"),"."),(0,r.kt)("p",null,"In an https/TLS request, the body will be safely encrypted and never exposed, so it is ",(0,r.kt)("strong",{parentName:"p"},"safe to send sensitive data"),"."),(0,r.kt)("h3",{id:"header-parameter"},"Header Parameter"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Headers are typically used provide data that is not specific to the current request, and may be processed upstream from the handler.")),(0,r.kt)("p",null,"Headers are especially useful for data that is needed prior to processing the request body, or by an entity other than the receiver of the request."),(0,r.kt)("p",null,"For e.g. caching and proxying relies on headers. Proxy servers might even change some headers before passing on the request."),(0,r.kt)("p",null,"Another example is content type negotiation. The server needs to know the payload will be in JSON and utf-8 ",(0,r.kt)("em",{parentName:"p"},"before")," it tries to parse the payload."),(0,r.kt)("p",null,"Headers tend to come from ",(0,r.kt)("strong",{parentName:"p"},"a set of common known headers"),", rather than completely custom options. Some are even mandatory."),(0,r.kt)("p",null,"Some examples are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Host")," : specifies the domain of the server it is communicating with. Mandatory."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Content-Type")," : specifies the type of content in the body and optionally, the charset."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," : specifies the authorization scheme and any associated data or token.")),(0,r.kt)("p",null,"Read here to learn more about the ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers"},"most common HTTP Headers"),"."),(0,r.kt)("p",null,"In our example, we have the following headers:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Host: api.move.mil\nContent-Type: application/json\nIf-Match: MjAyMC0xMi0wMVQxODo1NjoxMy4zNjkxNzRa\n")),(0,r.kt)("p",null,"This shows"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The mandatory ",(0,r.kt)("inlineCode",{parentName:"li"},"Host")," header used to send the hostname."),(0,r.kt)("li",{parentName:"ul"},"The commonly used ",(0,r.kt)("inlineCode",{parentName:"li"},"Content-Type")," header specifies that we are using JSON."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"If-Match")," header is used for ",(0,r.kt)("a",{parentName:"li",href:"/docs/web/api/rest-api-design/Concurrency-Control"},"Concurrency Control or Optimistic Locking"),".")),(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"It's important to follow conventions related to the positioning of parameters. Many other tools and frameworks will depend on these conventions which will make client implementation and integration simpler and more robust."))}u.isMDXComponent=!0},8209:(e,t,a)=>{a(7294)}}]);