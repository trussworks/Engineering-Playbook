"use strict";(globalThis.webpackChunkengineering_playbook=globalThis.webpackChunkengineering_playbook||[]).push([[6276],{3158:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"appeng/adrs/postgresql-as-relational-store","title":"0004 - Use PostgreSQL as a relational store","description":"Status: Accepted","source":"@site/docs/appeng/adrs/0004-postgresql-as-relational-store.md","sourceDirName":"appeng/adrs","slug":"/appeng/adrs/postgresql-as-relational-store","permalink":"/docs/appeng/adrs/postgresql-as-relational-store","draft":false,"unlisted":false,"editUrl":"https://github.com/trussworks/Engineering-Playbook/edit/main/docs/appeng/adrs/0004-postgresql-as-relational-store.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"practices","previous":{"title":"0003 Open Source Application Code","permalink":"/docs/appeng/adrs/open-source-application-code"},"next":{"title":"0005 - JavaScript dependency management","permalink":"/docs/appeng/adrs/javascript-dependency-management"}}');var i=n(4848),o=n(8453);const t={},a="0004 - Use PostgreSQL as a relational store",l={},d=[{value:"Context",id:"context",level:2},{value:"Decision",id:"decision",level:2},{value:"Why is this Applicable to the Practice as a Whole",id:"why-is-this-applicable-to-the-practice-as-a-whole",level:2},{value:"When to Not Implement This Decision",id:"when-to-not-implement-this-decision",level:2},{value:"Alternatives Considered",id:"alternatives-considered",level:2},{value:"PostgreSQL",id:"postgresql",level:3},{value:"Pros",id:"pros",level:4},{value:"Cons",id:"cons",level:4},{value:"MySQL",id:"mysql",level:3},{value:"Pros",id:"pros-1",level:4},{value:"Cons",id:"cons-1",level:4},{value:"Commercial Databases (Oracle, SQL Server, DB2, etc.)",id:"commercial-databases-oracle-sql-server-db2-etc",level:3},{value:"Pros",id:"pros-2",level:4},{value:"Cons",id:"cons-2",level:4}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"0004---use-postgresql-as-a-relational-store",children:"0004 - Use PostgreSQL as a relational store"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Status:"})," Accepted"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Date Accepted:"})," 5/5/2022"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Reviewers:"})," @felipe-lee @ferlatte @JasonLin0991 @macrael @mikena-truss @reggieriser @sandy-wright @suzubara"]}),"\n",(0,i.jsx)(s.h2,{id:"context",children:"Context"}),"\n",(0,i.jsx)(s.p,{children:"It is typical for our projects to require the persistent storage of data. A relational database is\noften a good choice for this as it allows us to predefine a schema for and relationships\nbetween data. A database management system (DBMS) can interpret and enforce these rules\nwhile providing a means to efficiently and safely interact with the data. This ADR documents the\nreasoning behind our recommendation of a preferred DBMS."}),"\n",(0,i.jsx)(s.h2,{id:"decision",children:"Decision"}),"\n",(0,i.jsxs)(s.p,{children:["Use ",(0,i.jsx)(s.a,{href:"https://www.postgresql.org",children:"PostgreSQL"})," when you need a relational store."]}),"\n",(0,i.jsx)(s.h2,{id:"why-is-this-applicable-to-the-practice-as-a-whole",children:"Why is this Applicable to the Practice as a Whole"}),"\n",(0,i.jsx)(s.p,{children:"Since the requirement for a relational data store is common, there are advantages of us standardizing\non one DBMS across the practice. Benefits include:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"ability to transfer knowledge across projects"}),"\n",(0,i.jsx)(s.li,{children:"reduced ramp-up time when switching projects"}),"\n",(0,i.jsx)(s.li,{children:"support by cloud providers, allowing reuse of infrasec practices"}),"\n",(0,i.jsx)(s.li,{children:"norming on a common SQL/DDL dialect"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Historically, most Truss projects deploy a database on AWS. Note that AWS provides two PostgreSQL options:\nRDS PostgreSQL and Aurora PostgreSQL. The typical Truss project will likely use RDS PostgreSQL since Aurora targets\nvery large or high-availability sites. That said, evaluate the features and pricing for each against your project's\nneeds."}),"\n",(0,i.jsx)(s.h2,{id:"when-to-not-implement-this-decision",children:"When to Not Implement This Decision"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"If the project's client/sponsor has an established and/or inflexible existing DBMS requirement"}),"\n",(0,i.jsx)(s.li,{children:"If the nature of the data lends itself to a different type of data store (NoSQL database, graph database, etc.)"}),"\n",(0,i.jsx)(s.li,{children:"The project is so small, self-contained, or temporary that a lightweight solution like SQLite is more appropriate"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"alternatives-considered",children:"Alternatives Considered"}),"\n",(0,i.jsx)(s.h3,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,i.jsx)(s.h4,{id:"pros",children:"Pros"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"+"})," Mature and full-featured DBMS with a 25-year history"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"+"})," Free and open-source"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"+"})," Good documentation and user community"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"+"})," Advanced JSON support, so flexible enough for some unstructured data"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"+"})," Supported by most database tools and ORMs"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"+"})," Most Truss projects have used PostgreSQL for a relational store, so we already have experience we can build upon"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"cons",children:"Cons"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"-"})," No guaranteed support (unless you pay for third-party support)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"-"})," Some clients may not be comfortable with an open-source DBMS"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"mysql",children:"MySQL"}),"\n",(0,i.jsx)(s.h4,{id:"pros-1",children:"Pros"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"+"})," Mature DBMS with a 25-year history"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"+"})," Community edition is free and open-source"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"+"})," Good documentation and user community"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"+"})," Supported by most database tools and ORMs"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"cons-1",children:"Cons"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"-"})," No guaranteed support (unless you pay for third-party support)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"-"})," Some clients may not be comfortable with an open-source DBMS"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"-"})," Given that MySQL is owned by Oracle, some worry that it may be harder to contribute to or not always be free"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"-"})," More advanced features are found in the paid Enterprise Edition"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"-"})," ACID support is not as mature"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"commercial-databases-oracle-sql-server-db2-etc",children:"Commercial Databases (Oracle, SQL Server, DB2, etc.)"}),"\n",(0,i.jsx)(s.h4,{id:"pros-2",children:"Pros"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"+"})," Mature DBMS with long history"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"+"})," Traditional paid software backed by a company and a support team"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"+"})," Supported by most database tools and ORMs"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"cons-2",children:"Cons"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"-"})," Licensing fees and support can be very expensive"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"-"})," Not open source so you are reliant on company for fixes"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"-"})," Support by ORMs can be spotty"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"-"})," Differences in SQL syntax and error codes can make it difficult to get help compared to more popular\nopen-source options"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>a});var r=n(6540);const i={},o=r.createContext(i);function t(e){const s=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);