"use strict";(globalThis.webpackChunkengineering_playbook=globalThis.webpackChunkengineering_playbook||[]).push([[5388],{8108:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"infrasec/aws/govcloud/README","title":"Working in GovCloud","description":"Many of our government clients will want to have at least their production","source":"@site/docs/infrasec/aws/govcloud/README.md","sourceDirName":"infrasec/aws/govcloud","slug":"/infrasec/aws/govcloud/","permalink":"/docs/infrasec/aws/govcloud/","draft":false,"unlisted":false,"editUrl":"https://github.com/trussworks/Engineering-Playbook/edit/main/docs/infrasec/aws/govcloud/README.md","tags":[],"version":"current","frontMatter":{},"sidebar":"practices","previous":{"title":"AWS Organizations","permalink":"/docs/infrasec/aws/aws-organizations"},"next":{"title":"ACM in GovCloud","permalink":"/docs/infrasec/aws/govcloud/gov-acm"}}');var s=o(4848),r=o(8453);const t={},a="Working in GovCloud",c={},l=[{value:"GovCloud Topics",id:"govcloud-topics",level:2},{value:"General Considerations With GovCloud",id:"general-considerations-with-govcloud",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"working-in-govcloud",children:"Working in GovCloud"})}),"\n",(0,s.jsxs)(n.p,{children:["Many of our government clients will want to have at least their production\ninfrastructure in ",(0,s.jsx)(n.a,{href:"https://aws.amazon.com/govcloud-us/",children:"AWS GovCloud"}),", which\nis a set of AWS regions that are separate from commercial AWS regions, with\na number of additional controls that allow them to conform to the higher\nsecurity and compliance standards needed to meet federal guidelines like\n",(0,s.jsx)(n.a,{href:"https://www.fedramp.gov/",children:"FedRAMP"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"govcloud-topics",children:"GovCloud Topics"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/infrasec/aws/govcloud/gov-orgs",children:"Setting Up a GovCloud Organization"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/infrasec/aws/govcloud/gov-acm",children:"ACM in GovCloud"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"general-considerations-with-govcloud",children:"General Considerations With GovCloud"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Every GovCloud account must be attached to a corresponding account in\ncommercial AWS (mostly for billing purposes). This has some impact on\nhow you build AWS Organizations in GovCloud (see below)."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Commercial AWS and GovCloud resources cannot interact directly in any\nway. This means that you cannot assume roles between the two or tie\na commercial resource to a GovCloud resource unless using some publicly\naddressable method."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["GovCloud accounts do not have a ",(0,s.jsx)(n.code,{children:"root"})," user; they have an automatically\ncreated IAM user named ",(0,s.jsx)(n.code,{children:"Administrator"})," with full administrative\nprivileges. For most purposes, you can think of this as operating the\nsame way as the ",(0,s.jsx)(n.code,{children:"root"})," user; however, it is still subject to restrictions\nyou place on all IAM users. This means setting password expiration to\na very short period (as is common in some of our commercial AWS\nenvironments) can lock you out of the ",(0,s.jsx)(n.code,{children:"Administrator"})," user; since we\ncan get console access via role assumption, we recommend setting the\npassword expiration on the GovCloud org-root account to six months and\ninstead treating this user as you would the ",(0,s.jsx)(n.code,{children:"root"}),' user in commercial\nAWS (ie, do not use it for anything other than bootstrapping or\n"break glass" cases).']}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"GovCloud resources use a different AWS partition; this is the second\npart of an ARN. So while an ARN for a commercial resource might look\nlike this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"arn:aws:iam::123456789000:user/testuser\n"})}),"\n",(0,s.jsx)(n.p,{children:"a GovCloud ARN will look like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"arn:aws-us-gov:iam::123456789000:user/testuser\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This means that any Terraform modules will need to take this into\naccount; see the Terraform\n",(0,s.jsx)(n.a,{href:"https://www.terraform.io/docs/providers/aws/d/partition.html",children:(0,s.jsx)(n.code,{children:"aws_partition"})}),"\ndata source for how to do this."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Many AWS services are not available in GovCloud; some are available\nin one GovCloud region and not others. See the GovCloud\n",(0,s.jsx)(n.a,{href:"https://aws.amazon.com/compliance/services-in-scope/",children:"Services in Scope"}),"\nand the AWS ",(0,s.jsx)(n.a,{href:"https://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/",children:"Region\nTable"}),"\nfor more information."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Organization CloudTrails are not available in GovCloud. This means you\ncannot add ",(0,s.jsx)(n.code,{children:"cloudtrail.amazonaws.com"})," as a service principal in your\norganization Terraform code."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:'Your first GovCloud account will have a randomly-named S3 bucket called\nsomething like "cloudtrail-123456789abcedf", and all additional GovCloud\naccounts you create via the method described in this document will have\na randomly-named CloudTrail and matching S3 bucket automatically created.\nWe recommend replacing these resources with your own CloudTrail pointing\nto the AWS service logs bucket you create in the account.'}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["It is not possible to enable CloudWatch Container Insights for an ECS\ncluster. Therefore, in ",(0,s.jsx)(n.code,{children:"aws_ecs_cluster"})," Terraform resources, you cannot\ninclude a ",(0,s.jsx)(n.code,{children:"setting"})," configuration block with ",(0,s.jsx)(n.code,{children:"containerInsights"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["For Amazon RDS, GovCloud does not support ",(0,s.jsx)(n.code,{children:"backup"})," or ",(0,s.jsx)(n.code,{children:"read replica"}),"\nevents. Therefore event notifications and subscriptions are impossible\nfor those events."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["As of 04/20, the most up-to-date CA cert identifier for RDS instances\nthat is viable in GovCloud is ",(0,s.jsx)(n.code,{children:"rds-ca-2017"})," rather than ",(0,s.jsx)(n.code,{children:"rds-ca-2019"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Because GovCloud doesn't have a root account in the traditional sense\n(it's tied to a commerical root account), you cannot set\n",(0,s.jsx)(n.code,{children:"check_root_account_mfa_enabled"})," to true in Truss' ",(0,s.jsx)(n.a,{href:"https://registry.terraform.io/modules/trussworks/config/aws",children:"AWS\nConfig"}),"\nmodule."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["While Route53 is available in GovCloud, it is ",(0,s.jsx)(n.em,{children:"only"})," available for\nprivate DNS, which limits its utility somewhat. You will need to create\npublic DNS entries for your GovCloud environments in your commercial\nAWS environment."]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>a});var i=o(6540);const s={},r=i.createContext(s);function t(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);