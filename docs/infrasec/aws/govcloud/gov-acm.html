<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-infrasec/aws/govcloud/gov-acm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">ACM in GovCloud | Truss Engineering Playbook</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://playbook.truss.dev/docs/infrasec/aws/govcloud/gov-acm"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ACM in GovCloud | Truss Engineering Playbook"><meta data-rh="true" name="description" content="AWS Certificate Manager (ACM) is our preferred way to handle certificates"><meta data-rh="true" property="og:description" content="AWS Certificate Manager (ACM) is our preferred way to handle certificates"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://playbook.truss.dev/docs/infrasec/aws/govcloud/gov-acm"><link data-rh="true" rel="alternate" href="https://playbook.truss.dev/docs/infrasec/aws/govcloud/gov-acm" hreflang="en"><link data-rh="true" rel="alternate" href="https://playbook.truss.dev/docs/infrasec/aws/govcloud/gov-acm" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"AWS","item":"https://playbook.truss.dev/docs/infrasec/aws/"},{"@type":"ListItem","position":2,"name":"Working in GovCloud","item":"https://playbook.truss.dev/docs/infrasec/aws/govcloud/"},{"@type":"ListItem","position":3,"name":"ACM in GovCloud","item":"https://playbook.truss.dev/docs/infrasec/aws/govcloud/gov-acm"}]}</script><link rel="stylesheet" href="/assets/css/styles.f2629a4b.css">
<script src="/assets/js/runtime~main.978db84b.js" defer="defer"></script>
<script src="/assets/js/main.ee0b65a6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/truss-icon-light.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/truss-icon-light.png" alt="Truss Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/truss-icon-light.png" alt="Truss Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Engineering Playbook</b></a><a class="navbar__item navbar__link" href="/docs">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/practices">Practices</a><a class="navbar__item navbar__link" href="/docs/incident-response">Incident Response</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/trussworks/Engineering-Playbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/practices"><span title="Engineering Practices" class="linkLabel_WmDU">Engineering Practices</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/appeng"><span title="AppEng" class="categoryLinkLabel_W154">AppEng</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/infrasec"><span title="InfraSec" class="categoryLinkLabel_W154">InfraSec</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec"><span title="InfraSec Practice" class="linkLabel_WmDU">InfraSec Practice</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/infrasec/adrs"><span title="ADRs" class="categoryLinkLabel_W154">ADRs</span></a><button aria-label="Expand sidebar category &#x27;ADRs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/alert-providers"><span title="Alert Providers" class="linkLabel_WmDU">Alert Providers</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/infrasec/ansible"><span title="Ansible" class="categoryLinkLabel_W154">Ansible</span></a><button aria-label="Expand sidebar category &#x27;Ansible&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/infrasec/aws"><span title="AWS" class="categoryLinkLabel_W154">AWS</span></a><button aria-label="Collapse sidebar category &#x27;AWS&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/aws/aws-organizations"><span title="AWS Organizations" class="linkLabel_WmDU">AWS Organizations</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/infrasec/aws/govcloud"><span title="Working in GovCloud" class="categoryLinkLabel_W154">Working in GovCloud</span></a><button aria-label="Collapse sidebar category &#x27;Working in GovCloud&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/infrasec/aws/govcloud/gov-acm"><span title="ACM in GovCloud" class="linkLabel_WmDU">ACM in GovCloud</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/aws/govcloud/gov-orgs"><span title="Setting Up a GovCloud Organization" class="linkLabel_WmDU">Setting Up a GovCloud Organization</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/aws/guardduty"><span title="GuardDuty for Organizations" class="linkLabel_WmDU">GuardDuty for Organizations</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/aws/naming"><span title="Naming" class="linkLabel_WmDU">Naming</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/aws/org-bootstrap"><span title="Bootstrapping an AWS Organization" class="linkLabel_WmDU">Bootstrapping an AWS Organization</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/aws/sns-guardduty-alert-integrations"><span title="Using SNS, GuardDuty, and External Integrations with AWS Organizations" class="linkLabel_WmDU">Using SNS, GuardDuty, and External Integrations with AWS Organizations</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/aws/sns-topics"><span title="SNS Topics" class="linkLabel_WmDU">SNS Topics</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/aws/vpcs"><span title="VPC Configuration" class="linkLabel_WmDU">VPC Configuration</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/book-club"><span title="Book Club" class="linkLabel_WmDU">Book Club</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/bootstrap"><span title="Project Bootstrap Guide" class="linkLabel_WmDU">Project Bootstrap Guide</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/certs"><span title="SSL Certificates" class="linkLabel_WmDU">SSL Certificates</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/charter"><span title="InfraSec Practice Charter" class="linkLabel_WmDU">InfraSec Practice Charter</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/ci_cd"><span title="CI/CD according to Truss" class="linkLabel_WmDU">CI/CD according to Truss</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/delivery-pipeline"><span title="Standard Delivery Pipeline" class="linkLabel_WmDU">Standard Delivery Pipeline</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/good-infra"><span title="Good Infrastructure - A Philosophy" class="linkLabel_WmDU">Good Infrastructure - A Philosophy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/pro-dev"><span title="Professional Development" class="linkLabel_WmDU">Professional Development</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infrasec/teardown"><span title="Project Teardown Guide" class="linkLabel_WmDU">Project Teardown Guide</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/infrasec/terraform"><span title="Terraform" class="categoryLinkLabel_W154">Terraform</span></a><button aria-label="Expand sidebar category &#x27;Terraform&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/infrasec/tutorials"><span title="Tutorials" class="categoryLinkLabel_W154">Tutorials</span></a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">InfraSec</span></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/infrasec/aws"><span>AWS</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/infrasec/aws/govcloud"><span>Working in GovCloud</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">ACM in GovCloud</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ACM in GovCloud</h1></header>
<p>AWS Certificate Manager (ACM) is our preferred way to handle certificates
in AWS whenever possible. Unfortunately, due to the fact that Route53
cannot create public DNS entries in GovCloud, the modules which create
ACM certificates and validate them with DNS will not work. This means the
process of creating these certificates becomes slightly more complicated.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-problem-acm-dns-validation">The problem: ACM DNS validation<a href="#the-problem-acm-dns-validation" class="hash-link" aria-label="Direct link to The problem: ACM DNS validation" title="Direct link to The problem: ACM DNS validation" translate="no">​</a></h2>
<p>In both the Truss and <code>terraform-aws-modules</code> ACM module, the module
attempts to create three resources:</p>
<ul>
<li class="">the ACM certificate</li>
<li class="">the Route53 DNS entry to validate the certificate</li>
<li class="">the Terraform <a href="https://www.terraform.io/docs/providers/aws/r/acm_certificate_validation.html" target="_blank" rel="noopener noreferrer" class=""><code>aws_acm_certificate_validation</code></a> resource</li>
</ul>
<p>It&#x27;s important to note that the <code>aws_acm_certificate_validation</code> resource
does not actually represent a real AWS resource -- it is an internal
mechanism Terraform uses to correctly order the creation of resources
dependent on a valid Terraform certificate. It is <em>not required</em> to
actually validate an ACM certificate.</p>
<p>However, the problem that the <code>aws_acm_certificate_validation</code> resource
was designed to solve -- preventing Terraform from trying to use an
invalid certificate on another resource, like an ALB -- still exists in
GovCloud. The ACM certificate resource itself <em>cannot be used</em> until it
has been validated. This means trying to create an ALB using an certificate
that has not yet been validated will fail, and in GovCloud, this creates
a timing issue, because we need to create the certificate to get the
DNS validation information, but we have to create the DNS entry in the
commercial organization before we can use it elsewhere in GovCloud.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-solution-step-by-step-creation">The solution: step-by-step creation<a href="#the-solution-step-by-step-creation" class="hash-link" aria-label="Direct link to The solution: step-by-step creation" title="Direct link to The solution: step-by-step creation" translate="no">​</a></h2>
<p>We can solve this by using a step-by-step creation method for our systems
which require ACM certificates. We recommend <em>not</em> creating these
certificates inside modules for your application, but instead providing
the certificate as a parameter that resources in your module can use, as
anything contingent on the successful creation of the certificate will fail
on your first apply of the module if you do include it.</p>
<p>To do this, here&#x27;s some sample code for the creation of the ACM certificate
in our GovCloud account:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="background-color:#faf8f5;color:#728fcb"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">resource &quot;aws_acm_certificate&quot; &quot;acm_myapp&quot; {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  domain_name       = &quot;myapp.example.com&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  validation_method = &quot;DNS&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    Name        = &quot;myapp.example.com&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    Automation  = &quot;Terraform&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  lifecycle {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    create_before_destroy = true</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">output &quot;myapp_cert_validation&quot; {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  description = &quot;Map of data for myapp cert validation&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  value       = aws_acm_certificate.acm_myapp.domain_validation_options</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The output is necessary because this is what will provide us the information
we need to create the validation DNS entry in our commercial AWS account. It
will look like this:</p>
<div class="language-terraform codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-terraform codeBlock_bY9V thin-scrollbar" style="background-color:#faf8f5;color:#728fcb"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">testing_cert_validation = [</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    &quot;domain_name&quot; = &quot;myapp.example.com&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    &quot;resource_record_name&quot; = &quot;_42ef3fd691a332acfe219f37910eee14.myapp.example.com.&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    &quot;resource_record_type&quot; = &quot;CNAME&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    &quot;resource_record_value&quot; = &quot;_31d89bcda5baf24c2518526a81f86617.tfmgdnztqk.acm-validations.aws.&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">]</span><br></span></code></pre></div></div>
<p>We can then take that output and create a DNS entry in our commercial DNS
account with this code:</p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="background-color:#faf8f5;color:#728fcb"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">resource &quot;aws_route53_record&quot; &quot;myapp_acm_validation&quot; {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  zone_id = aws_route53_zone.myzone.zone_id</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  name    = &quot;_42ef3fd691a332acfe219f37910eee14.myapp.example.com.&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  type    = &quot;CNAME&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  records = [&quot;_31d89bcda5baf24c2518526a81f86617.tfmgdnztqk.acm-validations.aws.&quot;]</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">  ttl     = 60</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Once this entry has been created, you should be able to use your certificate
on other resources within a minute or two. If you want to confirm that the
certificate has been validated, you can run these commands in the GovCloud
account:</p>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="background-color:#faf8f5;color:#728fcb"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">$ aws acm list-certificates</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">{</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    &quot;CertificateSummaryList&quot;: [</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">            &quot;CertificateArn&quot;: &quot;arn:aws:acm:us-west-2:000123456789:certificate/78dca028-1812-4fa5-9c84-b92fdeadbeef&quot;,</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">            &quot;DomainName&quot;: &quot;myapp.example.com&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">$ aws acm describe-certificate --certificate-arn &quot;arn:aws:acm:us-west-2:000123456789:certificate/78dca028-1812-4fa5-9c84-b92fdeadbeef&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">{</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    &quot;Certificate&quot;: {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        &quot;CertificateArn&quot;: &quot;arn:aws:acm:us-west-2:000123456789:certificate/78dca028-1812-4fa5-9c84-b92fdeadbeef&quot;,</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        &quot;DomainName&quot;: &quot;myapp.example.com&quot;,</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        &quot;SubjectAlternativeNames&quot;: [</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">            &quot;myapp.example.com&quot;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">        &quot;DomainValidationOptions&quot;: [</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                &quot;DomainName&quot;: &quot;myapp.example.com&quot;,</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                &quot;ValidationDomain&quot;: &quot;myapp.example.com&quot;,</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                &quot;ValidationStatus&quot;: &quot;SUCCESS&quot;,</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">...</span><br></span></code></pre></div></div>
<p>If your <code>ValidationStatus</code> is <code>SUCCESS</code>, your certificate should be ready to go.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/trussworks/Engineering-Playbook/edit/main/docs/infrasec/aws/govcloud/gov-acm.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/infrasec/aws/govcloud"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Working in GovCloud</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/infrasec/aws/govcloud/gov-orgs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Setting Up a GovCloud Organization</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-problem-acm-dns-validation" class="table-of-contents__link toc-highlight">The problem: ACM DNS validation</a></li><li><a href="#the-solution-step-by-step-creation" class="table-of-contents__link toc-highlight">The solution: step-by-step creation</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://6130eb5cde15830007fdf57b--docusaurus-2.netlify.app/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus Official Docs<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright 2026 TrussWorks, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>